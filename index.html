<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Interactive OS Disk Scheduling Algorithm Visualizer"
    />
    <title>OS Disk Scheduling Simulator</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="CSS/styles.css" />
    <link rel="stylesheet" href="CSS/layout.css" />
    <link rel="stylesheet" href="CSS/animations.css" />

    <!-- External Libraries for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>
  <body>
    <div class="app-container">
      <!-- ========================
            COLUMN 1: SIDEBAR (CONTROLS & INFO)
            ======================== -->
      <div class="sidebar">
        <!-- Panel 1: Configuration (Visible at start) -->
        <div id="config-panel">
          <header class="control-panel">
            <div class="header-title">
              <h1>üñ•Ô∏è OS Disk Scheduling</h1>
              <p>Algorithm Visualizer</p>
            </div>

            <div class="control-grid">
              <!-- Algorithm Selection -->
              <div class="control-group">
                <label for="algorithmSelect">Algorithm:</label>
                <select id="algorithmSelect">
                  <option value="fcfs">FCFS (First Come First Serve)</option>
                  <option value="sstf">SSTF (Shortest Seek Time First)</option>
                  <option value="scan">SCAN (Elevator Algorithm)</option>
                  <option value="cscan">C-SCAN (Circular SCAN)</option>
                  <option value="look">LOOK</option>
                  <option value="clook">C-LOOK (Circular LOOK)</option>
                </select>
              </div>

              <!-- Direction (for SCAN/LOOK) - Initially hidden -->
              <div class="control-group" id="directionGroup" style="display: none">
                <label>Direction (for SCAN/LOOK):</label>
                <div class="radio-group">
                  <label class="radio-label">
                    <input type="radio" name="direction" value="low" checked />
                    Towards 0 (Low)
                  </label>
                  <label class="radio-label">
                    <input type="radio" name="direction" value="high" />
                    Towards Max (High)
                  </label>
                </div>
              </div>

              <!-- Parameters -->
              <div class="control-group">
                <label for="initialHeadPosition">Initial Head Position:</label>
                <input
                  type="number"
                  id="initialHeadPosition"
                  value="53"
                  min="0"
                  placeholder="e.g., 53"
                />
              </div>
              <div class="control-group">
                <label for="maxTrackNumber">Max Track Number:</label>
                <input
                  type="number"
                  id="maxTrackNumber"
                  value="199"
                  min="10"
                  placeholder="e.g., 199"
                />
              </div>

              <!-- Request Queue -->
              <div class="control-group">
                <label for="requestQueue">Request Queue (comma-separated):</label>
                <input
                  type="text"
                  id="requestQueue"
                  value="98, 183, 37, 122, 14, 124, 65, 67"
                  placeholder="e.g., 98, 183, 37..."
                />
              </div>

              <!-- Run Button -->
              <button id="runBtn" class="btn btn-primary btn-full-width" title="Run the simulation">
                <span class="btn-icon">‚ñ∂Ô∏è</span>
                <span class="btn-text">Run Simulation</span>
              </button>
            </div>
          </header>
        </div>

        <!-- Panel 2: Simulation (Visible after 'Run') -->
        <div id="simulation-panel" style="display: none">
          <!-- Simulation Header -->
          <header class="control-panel">
            <div class="header-title">
              <h1>üñ•Ô∏è Simulation</h1>
              <p id="algorithmDescription">
                FCFS: Serves requests in the order they arrive.
              </p>
            </div>
          </header>

          <!-- Animation Controls -->
          <div class="info-section">
            <h3>Animation Controls</h3>
            <div class="button-row">
              <button id="playPauseBtn" class="btn btn-primary" title="Play/Pause Animation">
                <span class="btn-icon">‚è∏Ô∏è</span>
                <span class="btn-text">Pause</span>
              </button>
              <button id="stepBackwardBtn" class="btn btn-secondary" title="Step Backward">
                <span class="btn-icon">‚è™</span>
                <span class="btn-text">Step Back</span>
              </button>
              <button id="stepForwardBtn" class="btn btn-secondary" title="Step Forward">
                <span class="btn-icon">‚è©</span>
                <span class="btn-text">Step Fwd</span>
              </button>
              <button id="resetBtn" class="btn btn-secondary" title="Reset Animation">
                <span class="btn-icon">üîÑ</span>
                <span class="btn-text">Reset Anim</span>
              </button>
            </div>
            <div class="speed-control-group">
              <label for="speedSlider">Animation Speed:</label>
              <div class="speed-slider-container">
                <span class="speed-label">Slow</span>
                <input
                  type="range"
                  id="speedSlider"
                  min="1"
                  max="10"
                  value="5"
                  class="slider"
                />
                <span class="speed-label">Fast</span>
              </div>
            </div>
          </div>

          <!-- Pending Queue -->
          <div class="info-section" id="pendingQueueContainer">
            <h3>‚è≥ Pending Queue</h3>
            <div class="queue-container">
              <div id="pendingQueue" class="queue-list">
                <span class="queue-empty">No requests loaded</span>
              </div>
            </div>
          </div>

          <!-- Reset/Export Buttons -->
          <div class="info-section">
            <button id="exportBtn" class="btn btn-success btn-full-width" title="Export to PDF">
              <span class="btn-icon">üìÑ</span>
              <span class="btn-text">Export PDF</span>
            </button>
            <button id="resetAlgorithmBtn" class="btn btn-danger btn-full-width" title="Reset Simulation">
              <span class="btn-icon">üîÑ</span>
              <span class="btn-text">Reset Algorithm</span>
            </button>
          </div>
        </div>
      </div>
      <!-- ========================
            END OF SIDEBAR (COLUMN 1)
            ======================== -->

      <!-- ========================
            COLUMN 2: MAIN VISUALIZATION AREA
            ======================== -->
      <div class="main-content">
        <section class="visualization-panel">
          
          <!-- Live Statistics Card (Now includes ALL 5 stats) -->
          <div class="info-section">
            <div class="stats-grid">
              <!-- Stat Box 1: Moved from tracker -->
              <div class="stat-box" id="currentHeadPosContainer">
                <span class="stat-label">Current Head Position</span>
                <span class="stat-value" id="currentHeadPosition">0</span>
              </div>
              <!-- Stat Box 2 -->
              <div class="stat-box">
                <span class="stat-label">Total Head Movement</span>
                <span class="stat-value" id="totalHeadMovement">0</span>
              </div>
              <!-- Stat Box 3 -->
              <div class="stat-box">
                <span class="stat-label">Seeks Count</span>
                <span class="stat-value" id="seeksCount">0</span>
              </div>
              <!-- Stat Box 4 -->
              <div class="stat-box">
                <span class="stat-label">Average Seek Time</span>
                <span class="stat-value" id="averageSeekTime">0.00</span>
              </div>
              <!-- Stat Box 5 -->
              <div class="stat-box" id="nextTargetContainer">
                <span class="stat-label">Next Target</span>
                <span class="stat-value" id="nextTargetDisplay">-</span>
              </div>
            </div>
          </div>

          <!-- Head Position Tracker (REMOVED) -->

          <!-- Disk Representation -->
          <div class="disk-container">
            <canvas
              id="diskCanvas"
              class="disk-canvas"
              width="1000"
              height="150"
            ></canvas>
          </div>

          <!-- Position vs. Time Graph -->
          <div class="graph-container">
            <h3>Position vs. Time Graph</h3>
            <canvas
              id="graphCanvas"
              class="graph-canvas"
              width="1000"
              height="300"
            ></canvas>
          </div>

          <!-- Step Information -->
          <div class="step-info">
            <span id="currentStepDisplay">Step: 0 / 0</span>
          </div>
        </section>
      </div>
      <!-- ========================
            END OF VISUALIZATION (COLUMN 2)
            ======================== -->
    </div>
    <!-- ========================
         END OF APP-CONTAINER
         ======================== -->

    <!-- ========================
        JAVASCRIPT FILES
        ======================== -->

    <!-- Phase 1: State Management -->
    <script src="Javascript/state-manager.js"></script>

    <!-- Phase 2: Canvas Rendering -->
    <script src="Javascript/canvas-renderer.js"></script>

    <!-- Phase 3: Algorithm Base Class -->
    <script src="Javascript/Algorithms/algorithm-base.js"></script>

    <!-- Phase 4: Individual Algorithms -->
    <script src="Javascript/Algorithms/fcfs.js"></script>
    <script src="Javascript/Algorithms/sstf.js"></script>
    <script src="Javascript/Algorithms/scan.js"></script>
    <script src="Javascript/Algorithms/cscan.js"></script>
    <script src="Javascript/Algorithms/look.js"></script>
    <script src="Javascript/Algorithms/clook.js"></script>

    <!-- Phase 5: Controller -->
    <script src="Javascript/controller.js"></script>

    <!-- Phase 6: Main Entry Point -->
    <script src="Javascript/main.js"></script>
  </body>
</html>

